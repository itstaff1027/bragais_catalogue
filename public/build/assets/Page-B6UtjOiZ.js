import{j as o,W as ne,q as ie,r as s,y as c}from"./app-C6tpQrQf.js";import"./AuthenticatedLayout-BvYwJ_Ly.js";import{P as de}from"./ProductsLayout-XIm6SGxR.js";import{T as ue,I as p}from"./TextInput-Cufyv0bx.js";import{I as i}from"./InputLabel-IRRb6COH.js";import{R as pe,C,S as he,H as ge,a as me}from"./RadioButtonStatus-mMH8sllD.js";import"./ApplicationLogo-msha1_0N.js";import"./transition-RZe3l1-p.js";function _e({className:t="",handleFileChange:a,handleUpload:d,product_id:b=0,preview:S,...n}){return o.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 bg-gray-50 border border-gray-200 rounded-lg shadow-md",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{className:"h-36 w-36 object-cover border-2 border-violet-500 shadow-md",src:S||"",alt:"Image"}),o.jsx(i,{htmlFor:"fileInput",className:"absolute bottom-0 right-0 p-2 bg-white rounded-full border border-gray-200 shadow hover:bg-gray-100 cursor-pointer",children:"+"})]}),o.jsx("input",{id:"fileInput",type:"file",accept:"image/*",className:"hidden",onChange:a}),o.jsx("p",{className:"text-sm text-gray-500",children:"Upload Image."}),o.jsx("button",{className:"px-6 py-2 text-white bg-violet-600 rounded-lg shadow-md hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-1",onClick:d,children:"Upload"})]})}function Ee({items:t}){const{data:a,setData:d,post:b,processing:S,errors:n,reset:l,isDirty:fe}=ne({id:t.id,model:t.model,status:t.status,size_id:t.size_id,category_id:t.category_id,image:null,folder:"local_images"});ie();const[E,H]=s.useState(t.model),[N,z]=s.useState(null),[j,T]=s.useState([]),[O,A]=s.useState([]),[F,I]=s.useState([]),[P,D]=s.useState([]),[R,U]=s.useState([]),[M,k]=s.useState([]),[L,W]=s.useState([]),[B,$]=s.useState([]),[v,q]=s.useState(""),[G,w]=s.useState(!0),J=e=>{c.post(route("add_product.color"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{_(),u()},preserveScroll:!0})},K=e=>{c.post(route("remove_product.color"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{_(),u()},preserveScroll:!0})},Q=e=>{console.log(e),c.post(route("heel_height_product.update"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{g(),h()},preserveScroll:!0})},V=e=>{c.post(route("heel_height_product.destroy"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{g(),h()},preserveScroll:!0})},X=e=>{c.post(route("sizes_product.update"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{y(),f()},preserveScroll:!0})},Y=e=>{c.post(route("sizes_product.destroy"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{y(),f()},preserveScroll:!0})},Z=e=>{confirm("Are you sure you want to update the product status?")?c.post(route("product_update.status"),{id:t.id,status:e},{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{g(),h()},preserveScroll:!0}):console.log("Action canceled by user")},ee=e=>{confirm("Are you sure you want to change the Category of this Product?")?c.post(route("update_product.category"),{id:t.id,category_id:e},{onSuccess:r=>{d("category_id",r.props.items.category_id)},onError:r=>{console.error("An error occurred:",r)},preserveScroll:!0}):console.log("Action canceled by user")},oe=()=>{confirm("Are you sure you want to change the Model Name of this Product?")?c.post(route("update_product.model"),{id:t.id,model:a.model},{onSuccess:e=>{d("model",e.props.items.model),H(e.props.items.model)},onError:e=>{console.error("An error occurred:",e)},preserveScroll:!0}):console.log("Action canceled by user")},re=e=>{confirm("Are you sure you want to change the Order Type of this Product-Color?")?c.post(route("update_product_color.order_type"),{order_type_id:e,item:v},{onSuccess:r=>{w(!0),u()},onError:r=>{console.error("An error occurred:",r)},preserveScroll:!0}):console.log("Action canceled by user")},te=e=>{q(e),u(),ce(),w(!1)};s.useState([{id:1,value:""},{id:2,value:""},{id:3,value:""},{id:4,value:""},{id:5,value:""}]);const se=e=>{c.post(route("product_image.destroy"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{x()},preserveScroll:!0})},x=async()=>{try{const r=await(await fetch(route("storage.product_keys",t.id),{headers:{"Content-Type":"application/json"}})).json();T(r)}catch(e){console.log("Something went Wrong",e)}},ce=async()=>{try{const r=await(await fetch(route("product.order_types"),{headers:{"Content-Type":"application/json"}})).json();console.log(r),$(r)}catch(e){console.error("Error fetching colors:",e)}},_=async()=>{try{const r=await(await fetch(route("product.colors"),{headers:{"Content-Type":"application/json"}})).json();A(r)}catch(e){console.error("Error fetching colors:",e)}},u=async()=>{try{const e=await fetch(route("color_product",t.id),{headers:{"Content-Type":"application/json"}});if(!e.ok){console.error("Error response status:",e.status);const m=await e.text();console.error("Error response body:",m);return}const r=await e.json();I(r)}catch(e){console.error("Error fetching colors:",e)}},h=async()=>{try{const r=await(await fetch(route("product.heel_heights"),{headers:{"Content-Type":"application/json"}})).json();D(r)}catch(e){console.error("Error fetching HeelHeight:",e)}},g=async()=>{try{const e=await fetch(route("heel_height_product",t.id),{headers:{"Content-Type":"application/json"}});if(!e.ok){console.error("Error response status:",e.status);const m=await e.text();console.error("Error response body:",m);return}const r=await e.json();U(r)}catch(e){console.error("Error fetching HeelHeight:",e)}},f=async()=>{try{const r=await(await fetch(route("product.sizes"),{headers:{"Content-Type":"application/json"}})).json();k(r)}catch(e){console.error("Error fetching Size:",e)}},y=async()=>{try{const e=await fetch(route("sizes_product",t.id),{headers:{"Content-Type":"application/json"}});if(!e.ok){console.error("Error response status:",e.status);const m=await e.text();console.error("Error response body:",m);return}const r=await e.json();W(r)}catch(e){console.error("Error fetching Size:",e)}},le=e=>{const r=e.target.files[0];d("image",e.target.files[0]),r&&(r.type.startsWith("image/")?z(URL.createObjectURL(r)):alert("Please select a valid image file."))},ae=()=>{c.post(route("upload.image"),a,{onSuccess:e=>{e.props.url},onError:e=>{console.error("An error occurred:",e)},onFinish:()=>{x()},preserveScroll:!0})};return s.useEffect(()=>{x(),_(),u(),g(),h(),y(),f()},[]),o.jsx(de,{header:o.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Edit Product"}),children:o.jsxs("div",{className:"flex flex-col justify-center w-full",children:[o.jsx(_e,{handleFileChange:le,handleUpload:ae,preview:N,product_id:t.id}),j.length>0?o.jsx("div",{className:"flex flex-col w-full p-4",children:o.jsx("div",{className:"flex w-full p-4 overflow-auto",children:j.map(e=>o.jsx("div",{className:"flex w-full p-1",children:o.jsxs("div",{className:"flex flex-col justify-center items-center relative",children:[o.jsx("img",{src:`${e.storage_url}`,alt:"Product Image"}),o.jsx("button",{type:"button",onClick:()=>se({id:e.id,path:e.storage_values}),className:"absolute top-0 right-0 bg-red-500 text-white px-3 rounded-3xl hover:bg-red-700 transition delay-30",children:"Trash"},e.id)]},e.id)},e.id))})}):o.jsx("div",{children:" No Images can Display, Upload an Image to Display."}),o.jsxs("div",{className:"w-full p-4",children:[o.jsx(i,{htmlFor:"model",value:"Model Name"}),o.jsx(ue,{id:"model",type:"text",name:"model",value:a.model,className:"mt-1 block w-1/2",isFocused:!0,onChange:e=>d("model",e.target.value)}),E!==a.model&&o.jsx(o.Fragment,{children:o.jsx("button",{className:"p-4 m-4 rounded-xl text-white bg-blue-400",type:"submit",onClick:oe,children:"Update"})}),o.jsx(p,{message:n.model,className:"mt-2"}),o.jsx("hr",{}),o.jsx(i,{htmlFor:"status",value:"Statuses"}),o.jsx(pe,{handleSelectChange:e=>Z(e),status:t.status}),o.jsx(p,{message:n.status,className:"mt-2"}),o.jsx("hr",{}),o.jsx(i,{htmlFor:"colors",value:"Colors"}),o.jsx("div",{className:"w-full relative",children:o.jsx(C.OrderTypes,{className:` p-4 ${G?"hidden":"flex flex-col"}`,filteredOptions:B,selectedOrderTypes:v,handleSelectedOrderTypes:e=>re(e)})}),o.jsx("div",{className:"p-4",children:o.jsx(C.EditColors,{handleSelectedColor:e=>J(e),handleRemoveColor:e=>K(e),handleUpdateOrderTypes:e=>te(e),product_id:t.id,fetchSelectedColors:u,fetchSelectionColors:_,filteredOptions:O,selectedColors:F})}),o.jsx(p,{message:n.color_id,className:"mt-2"}),o.jsx("hr",{}),o.jsx(i,{htmlFor:"sizes",value:"Sizes"}),o.jsxs("div",{className:"p-4",children:[o.jsx(he.DropDown,{handleSelectedSize:e=>X(e),handleRemoveSize:e=>Y(e),product_id:t.id,fetchSelectedSizes:y,fetchSelectionSizes:f,filteredOptions:M,selectedSizes:L}),o.jsx(p,{message:n.size_id,className:"mt-2"})]}),o.jsx("hr",{}),o.jsx(i,{htmlFor:"heel_heights",value:"Heel Heights"}),o.jsxs("div",{className:"p-4",children:[o.jsx(ge.DropDown,{handleSelectedHeelHeight:e=>Q(e),handleRemoveHeelHeight:e=>V(e),product_id:t.id,fetchSelectedHeelHeights:g,fetchSelectionHeelHeights:h,filteredOptions:P,selectedHeelHeights:R}),o.jsx(p,{message:n.heel_height_id,className:"mt-2"})]}),o.jsx("hr",{}),o.jsx(i,{htmlFor:"categories",value:"Categories"}),o.jsxs("div",{className:"p-4",children:[o.jsx(me.Edit,{handleSelectChange:e=>ee(e),selectedItemId:a.category_id}),o.jsx(p,{message:n.category_id,className:"mt-2"})]})]})]})})}export{Ee as default};
