import{j as o,W as Y,q as Z,r as s,y as c}from"./app-BV9PvaFq.js";import"./AuthenticatedLayout-CNQY6d3q.js";import{P as ee}from"./ProductsLayout-BIQ3HEsd.js";import{T as oe,I as u}from"./TextInput-BxmmcsCV.js";import{I as n}from"./InputLabel-CBJc8zk5.js";import{R as re,C as te,S as se,H as ce,a as le}from"./RadioButtonStatus-CvBVtEY0.js";import"./ApplicationLogo-WuIAXqlv.js";import"./transition-KlsjH5QY.js";function ae({className:t="",handleFileChange:a,handleUpload:d,product_id:v=0,preview:y,...i}){return o.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 bg-gray-50 border border-gray-200 rounded-lg shadow-md",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{className:"h-36 w-36 object-cover border-2 border-violet-500 shadow-md",src:y||"",alt:"Image"}),o.jsx(n,{htmlFor:"fileInput",className:"absolute bottom-0 right-0 p-2 bg-white rounded-full border border-gray-200 shadow hover:bg-gray-100 cursor-pointer",children:"+"})]}),o.jsx("input",{id:"fileInput",type:"file",accept:"image/*",className:"hidden",onChange:a}),o.jsx("p",{className:"text-sm text-gray-500",children:"Upload Image."}),o.jsx("button",{className:"px-6 py-2 text-white bg-violet-600 rounded-lg shadow-md hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-1",onClick:d,children:"Upload"})]})}function xe({items:t}){const{data:a,setData:d,post:v,processing:y,errors:i,reset:l,isDirty:ie}=Y({id:t.id,model:t.model,status:t.status,size_id:t.size_id,category_id:t.category_id,image:null,folder:"local_images"});Z();const[w,b]=s.useState(t.model),[C,z]=s.useState(null),[j,E]=s.useState([]),[H,N]=s.useState([]),[F,I]=s.useState([]),[A,T]=s.useState([]),[P,D]=s.useState([]),[O,R]=s.useState([]),[U,k]=s.useState([]),L=e=>{c.post(route("add_product.color"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{m(),_()},preserveScroll:!0})},M=e=>{c.post(route("remove_product.color"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{m(),_()},preserveScroll:!0})},W=e=>{console.log(e),c.post(route("heel_height_product.update"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{p(),h()},preserveScroll:!0})},B=e=>{c.post(route("heel_height_product.destroy"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{p(),h()},preserveScroll:!0})},q=e=>{c.post(route("sizes_product.update"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{f(),x()},preserveScroll:!0})},$=e=>{c.post(route("sizes_product.destroy"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{f(),x()},preserveScroll:!0})},G=e=>{confirm("Are you sure you want to update the product status?")?c.post(route("product_update.status"),{id:t.id,status:e},{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{p(),h()},preserveScroll:!0}):console.log("Action canceled by user")},J=e=>{confirm("Are you sure you want to change the Category of this Product?")?c.post(route("update_product.category"),{id:t.id,category_id:e},{onSuccess:r=>{d("category_id",r.props.items.category_id)},onError:r=>{console.error("An error occurred:",r)},preserveScroll:!0}):console.log("Action canceled by user")},K=()=>{confirm("Are you sure you want to change the Model Name of this Product?")?c.post(route("update_product.model"),{id:t.id,model:a.model},{onSuccess:e=>{d("model",e.props.items.model),b(e.props.items.model)},onError:e=>{console.error("An error occurred:",e)},preserveScroll:!0}):console.log("Action canceled by user")};s.useState([{id:1,value:""},{id:2,value:""},{id:3,value:""},{id:4,value:""},{id:5,value:""}]);const Q=e=>{c.post(route("product_image.destroy"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{S()},preserveScroll:!0})},S=async()=>{try{const r=await(await fetch(route("storage.product_keys",t.id),{headers:{"Content-Type":"application/json"}})).json();E(r)}catch(e){console.log("Something went Wrong",e)}},m=async()=>{try{const r=await(await fetch(route("product.colors"),{headers:{"Content-Type":"application/json"}})).json();N(r)}catch(e){console.error("Error fetching colors:",e)}},_=async()=>{try{const e=await fetch(route("color_product",t.id),{headers:{"Content-Type":"application/json"}});if(!e.ok){console.error("Error response status:",e.status);const g=await e.text();console.error("Error response body:",g);return}const r=await e.json();I(r)}catch(e){console.error("Error fetching colors:",e)}},h=async()=>{try{const r=await(await fetch(route("product.heel_heights"),{headers:{"Content-Type":"application/json"}})).json();T(r)}catch(e){console.error("Error fetching HeelHeight:",e)}},p=async()=>{try{const e=await fetch(route("heel_height_product",t.id),{headers:{"Content-Type":"application/json"}});if(!e.ok){console.error("Error response status:",e.status);const g=await e.text();console.error("Error response body:",g);return}const r=await e.json();D(r)}catch(e){console.error("Error fetching HeelHeight:",e)}},x=async()=>{try{const r=await(await fetch(route("product.sizes"),{headers:{"Content-Type":"application/json"}})).json();R(r)}catch(e){console.error("Error fetching Size:",e)}},f=async()=>{try{const e=await fetch(route("sizes_product",t.id),{headers:{"Content-Type":"application/json"}});if(!e.ok){console.error("Error response status:",e.status);const g=await e.text();console.error("Error response body:",g);return}const r=await e.json();k(r)}catch(e){console.error("Error fetching Size:",e)}},V=e=>{const r=e.target.files[0];d("image",e.target.files[0]),r&&(r.type.startsWith("image/")?z(URL.createObjectURL(r)):alert("Please select a valid image file."))},X=()=>{c.post(route("upload.image"),a,{onSuccess:e=>{e.props.url},onError:e=>{console.error("An error occurred:",e)},onFinish:()=>{S()},preserveScroll:!0})};return s.useEffect(()=>{S(),m(),_(),p(),h(),f(),x()},[]),o.jsx(ee,{header:o.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Edit Product"}),children:o.jsxs("div",{className:"flex flex-col justify-center w-full",children:[o.jsx(ae,{handleFileChange:V,handleUpload:X,preview:C,product_id:t.id}),j.length>0?o.jsx("div",{className:"flex flex-col w-full p-4",children:o.jsx("div",{className:"flex w-full p-4 overflow-auto",children:j.map(e=>o.jsx("div",{className:"flex w-full p-1",children:o.jsxs("div",{className:"flex flex-col justify-center items-center relative",children:[o.jsx("img",{src:`${e.storage_url}`,alt:"Product Image"}),o.jsx("button",{type:"button",onClick:()=>Q({id:e.id,path:e.storage_values}),className:"absolute top-0 right-0 bg-red-500 text-white px-3 rounded-3xl hover:bg-red-700 transition delay-30",children:"Trash"},e.id)]},e.id)},e.id))})}):o.jsx("div",{children:" No Images can Display, Upload an Image to Display."}),o.jsxs("div",{className:"w-full p-4",children:[o.jsx(n,{htmlFor:"model",value:"Model Name"}),o.jsx(oe,{id:"model",type:"text",name:"model",value:a.model,className:"mt-1 block w-1/2",isFocused:!0,onChange:e=>d("model",e.target.value)}),w!==a.model&&o.jsx(o.Fragment,{children:o.jsx("button",{className:"p-4 m-4 rounded-xl text-white bg-blue-400",type:"submit",onClick:K,children:"Update"})}),o.jsx(u,{message:i.model,className:"mt-2"}),o.jsx("hr",{}),o.jsx(n,{htmlFor:"status",value:"Statuses"}),o.jsx(re,{handleSelectChange:e=>G(e),status:t.status}),o.jsx(u,{message:i.status,className:"mt-2"}),o.jsx("hr",{}),o.jsx(n,{htmlFor:"colors",value:"Colors"}),o.jsx("div",{className:"p-4",children:o.jsx(te.EditColors,{handleSelectedColor:e=>L(e),handleRemoveColor:e=>M(e),product_id:t.id,fetchSelectedColors:_,fetchSelectionColors:m,filteredOptions:H,selectedColors:F})}),o.jsx(u,{message:i.color_id,className:"mt-2"}),o.jsx("hr",{}),o.jsx(n,{htmlFor:"sizes",value:"Sizes"}),o.jsxs("div",{className:"p-4",children:[o.jsx(se.DropDown,{handleSelectedSize:e=>q(e),handleRemoveSize:e=>$(e),product_id:t.id,fetchSelectedSizes:f,fetchSelectionSizes:x,filteredOptions:O,selectedSizes:U}),o.jsx(u,{message:i.size_id,className:"mt-2"})]}),o.jsx("hr",{}),o.jsx(n,{htmlFor:"heel_heights",value:"Heel Heights"}),o.jsxs("div",{className:"p-4",children:[o.jsx(ce.DropDown,{handleSelectedHeelHeight:e=>W(e),handleRemoveHeelHeight:e=>B(e),product_id:t.id,fetchSelectedHeelHeights:p,fetchSelectionHeelHeights:h,filteredOptions:A,selectedHeelHeights:P}),o.jsx(u,{message:i.heel_height_id,className:"mt-2"})]}),o.jsx("hr",{}),o.jsx(n,{htmlFor:"categories",value:"Categories"}),o.jsxs("div",{className:"p-4",children:[o.jsx(le.Edit,{handleSelectChange:e=>J(e),selectedItemId:a.category_id}),o.jsx(u,{message:i.category_id,className:"mt-2"})]})]})]})})}export{xe as default};
