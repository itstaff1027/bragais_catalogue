import{W as ie,q as de,r as s,j as o,y as c}from"./app-iZSV8EgF.js";import"./Dropdown-B8arDyWx.js";import"./AuthenticatedLayout-BgT9IyFk.js";import{P as ue}from"./ProductsLayout-C2Kp6aAN.js";import{T as pe}from"./TextInput-BrZu-hyR.js";import{I as p}from"./InputLabel-n_zGs8Sd.js";import{I as d}from"./InputError-fJgJ2oAT.js";import{C as H,S as he,H as me,a as ge}from"./CategoriesDropDown-yo0Nc9To.js";import{R as _e}from"./RadioButtonStatus-CZbIfjuJ.js";import{I as ye}from"./Image-B1--NIiF.js";import"./transition-BkvbL9vh.js";import"./ApplicationLogo-CLxbFd_l.js";function Fe({items:t}){const{data:h,setData:m,post:fe,processing:Se,errors:i,reset:l,isDirty:xe}=ie({id:t.id,model:t.model,status:t.status,size_id:t.size_id,category_id:t.category_id,image:[],folder:"local_images"});de();const[z,N]=s.useState(t.model),[T,j]=s.useState([]),[w,O]=s.useState([]),[b,A]=s.useState([]),[F,I]=s.useState([]),[R,P]=s.useState([]),[D,U]=s.useState([]),[L,M]=s.useState([]),[k,W]=s.useState([]),[B,$]=s.useState([]),[C,q]=s.useState(""),[G,E]=s.useState(!0),J=e=>{c.post(route("add_product.color"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{y(),u()},preserveScroll:!0})},K=e=>{c.post(route("remove_product.color"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{y(),u()},preserveScroll:!0})},Q=e=>{console.log(e),c.post(route("heel_height_product.update"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{_(),g()},preserveScroll:!0})},V=e=>{c.post(route("heel_height_product.destroy"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{_(),g()},preserveScroll:!0})},X=e=>{c.post(route("sizes_product.update"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{S(),f()},preserveScroll:!0})},Y=e=>{c.post(route("sizes_product.destroy"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{S(),f()},preserveScroll:!0})},Z=e=>{confirm("Are you sure you want to update the product status?")?c.post(route("product_update.status"),{id:t.id,status:e},{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{_(),g()},preserveScroll:!0}):console.log("Action canceled by user")},ee=e=>{confirm("Are you sure you want to change the Category of this Product?")?c.post(route("update_product.category"),{id:t.id,category_id:e},{onSuccess:r=>{m("category_id",r.props.items.category_id)},onError:r=>{console.error("An error occurred:",r)},preserveScroll:!0}):console.log("Action canceled by user")},oe=()=>{confirm("Are you sure you want to change the Model Name of this Product?")?c.post(route("update_product.model"),{id:t.id,model:h.model},{onSuccess:e=>{m("model",e.props.items.model),N(e.props.items.model)},onError:e=>{console.error("An error occurred:",e)},preserveScroll:!0}):console.log("Action canceled by user")},re=e=>{confirm("Are you sure you want to change the Order Type of this Product-Color?")?c.post(route("update_product_color.order_type"),{order_type_id:e,item:C},{onSuccess:r=>{E(!0),u()},onError:r=>{console.error("An error occurred:",r)},preserveScroll:!0}):console.log("Action canceled by user")},te=e=>{q(e),u(),ce(),E(!1)};s.useState([{id:1,value:""},{id:2,value:""},{id:3,value:""},{id:4,value:""},{id:5,value:""}]);const se=e=>{c.post(route("product_image.destroy"),e,{onSuccess:()=>{l("model","status","product_color_id","size_id","heel_height_id","category_id")},onError:r=>{console.error("An error occurred:",r)},onFinish:()=>{v()},preserveScroll:!0})},v=async()=>{try{const r=await(await fetch(route("storage.product_keys",t.id),{headers:{"Content-Type":"application/json"}})).json();O(r)}catch(e){console.log("Something went Wrong",e)}},ce=async()=>{try{const r=await(await fetch(route("product.order_types"),{headers:{"Content-Type":"application/json"}})).json();console.log(r),$(r)}catch(e){console.error("Error fetching colors:",e)}},y=async()=>{try{const r=await(await fetch(route("product.colors"),{headers:{"Content-Type":"application/json"}})).json();A(r)}catch(e){console.error("Error fetching colors:",e)}},u=async()=>{try{const e=await fetch(route("color_product",t.id),{headers:{"Content-Type":"application/json"}});if(!e.ok){console.error("Error response status:",e.status);const a=await e.text();console.error("Error response body:",a);return}const r=await e.json();I(r)}catch(e){console.error("Error fetching colors:",e)}},g=async()=>{try{const r=await(await fetch(route("product.heel_heights"),{headers:{"Content-Type":"application/json"}})).json();P(r)}catch(e){console.error("Error fetching HeelHeight:",e)}},_=async()=>{try{const e=await fetch(route("heel_height_product",t.id),{headers:{"Content-Type":"application/json"}});if(!e.ok){console.error("Error response status:",e.status);const a=await e.text();console.error("Error response body:",a);return}const r=await e.json();U(r)}catch(e){console.error("Error fetching HeelHeight:",e)}},f=async()=>{try{const r=await(await fetch(route("product.sizes"),{headers:{"Content-Type":"application/json"}})).json();M(r)}catch(e){console.error("Error fetching Size:",e)}},S=async()=>{try{const e=await fetch(route("sizes_product",t.id),{headers:{"Content-Type":"application/json"}});if(!e.ok){console.error("Error response status:",e.status);const a=await e.text();console.error("Error response body:",a);return}const r=await e.json();W(r)}catch(e){console.error("Error fetching Size:",e)}},ae=e=>{const a=Array.from(e.target.files).filter(n=>n.type.startsWith("image/")),x=a.map(n=>({file:n,preview:URL.createObjectURL(n)}));j(n=>[...n,...x]),m("image",a)},le=e=>{j(r=>{URL.revokeObjectURL(r[e].preview);const a=r.filter((x,n)=>n!==e);return m("image",a.map(x=>x.file)),a})},ne=()=>{c.post(route("upload.image"),h,{onSuccess:e=>{e.props.url},onError:e=>{console.error("An error occurred:",e)},onFinish:()=>{l(),j([]),v()},preserveScroll:!0})};return s.useEffect(()=>{v(),y(),u(),_(),g(),S(),f()},[]),o.jsx(ue,{header:o.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Edit Product"}),children:o.jsxs("div",{className:"flex flex-col justify-center w-full",children:[o.jsx(ye,{previewStyle:"h-72 w-72",handleFileChange:ae,handleUpload:ne,handleRemoveImage:le,previews:T,product_id:t.id,inputName:"image"}),o.jsx(d,{message:i.image,className:"mt-2"}),w.length>0?o.jsx("div",{className:"flex flex-col w-full p-4",children:o.jsx("div",{className:"flex w-full p-4 overflow-auto",children:w.map(e=>o.jsx("div",{className:"flex w-full p-1",children:o.jsxs("div",{className:"flex flex-col justify-center items-center relative",children:[o.jsx("img",{src:`${e.storage_url}`,alt:"Product Image"}),o.jsx("button",{type:"button",onClick:()=>se({id:e.id,path:e.storage_values}),className:"absolute top-0 right-0 bg-red-500 text-white px-3 rounded-3xl hover:bg-red-700 transition delay-30",children:"Trash"},e.id)]},e.id)},e.id))})}):o.jsx("div",{children:" No Images can Display, Upload an Image to Display."}),o.jsxs("div",{className:"w-full p-4",children:[o.jsx(p,{htmlFor:"model",value:"Model Name"}),o.jsx(pe,{id:"model",type:"text",name:"model",value:h.model,className:"mt-1 block w-1/2",isFocused:!0,onChange:e=>m("model",e.target.value)}),z!==h.model&&o.jsx(o.Fragment,{children:o.jsx("button",{className:"p-4 m-4 rounded-xl text-white bg-blue-400",type:"submit",onClick:oe,children:"Update"})}),o.jsx(d,{message:i.model,className:"mt-2"}),o.jsx("hr",{}),o.jsx(p,{htmlFor:"status",value:"Statuses"}),o.jsx(_e,{handleSelectChange:e=>Z(e),status:t.status}),o.jsx(d,{message:i.status,className:"mt-2"}),o.jsx("hr",{}),o.jsx(p,{htmlFor:"colors",value:"Colors"}),o.jsx("div",{className:"w-full relative",children:o.jsx(H.OrderTypes,{className:` p-4 ${G?"hidden":"flex flex-col"}`,filteredOptions:B,selectedOrderTypes:C,handleSelectedOrderTypes:e=>re(e)})}),o.jsx("div",{className:"p-4",children:o.jsx(H.EditColors,{handleSelectedColor:e=>J(e),handleRemoveColor:e=>K(e),handleUpdateOrderTypes:e=>te(e),product_id:t.id,fetchSelectedColors:u,fetchSelectionColors:y,filteredOptions:b,selectedColors:F})}),o.jsx(d,{message:i.color_id,className:"mt-2"}),o.jsx("hr",{}),o.jsx(p,{htmlFor:"sizes",value:"Sizes"}),o.jsxs("div",{className:"p-4",children:[o.jsx(he.DropDown,{handleSelectedSize:e=>X(e),handleRemoveSize:e=>Y(e),product_id:t.id,fetchSelectedSizes:S,fetchSelectionSizes:f,filteredOptions:L,selectedSizes:k}),o.jsx(d,{message:i.size_id,className:"mt-2"})]}),o.jsx("hr",{}),o.jsx(p,{htmlFor:"heel_heights",value:"Heel Heights"}),o.jsxs("div",{className:"p-4",children:[o.jsx(me.DropDown,{handleSelectedHeelHeight:e=>Q(e),handleRemoveHeelHeight:e=>V(e),product_id:t.id,fetchSelectedHeelHeights:_,fetchSelectionHeelHeights:g,filteredOptions:R,selectedHeelHeights:D}),o.jsx(d,{message:i.heel_height_id,className:"mt-2"})]}),o.jsx("hr",{}),o.jsx(p,{htmlFor:"categories",value:"Categories"}),o.jsxs("div",{className:"p-4",children:[o.jsx(ge.Edit,{handleSelectChange:e=>ee(e),selectedItemId:h.category_id}),o.jsx(d,{message:i.category_id,className:"mt-2"})]})]})]})})}export{Fe as default};
